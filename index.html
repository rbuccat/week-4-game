<!DOCTYPE html>
<html>
<head>
	<title>star wars</title>
	<link rel="stylesheet" type="text/css" href="assets/css/reset.css">
	<link rel="stylesheet" type="text/css" href="assets/css/style.css">
</head>
<body>

<div id="buttons"></div>
<div id="mycharacter">
	<p>Your Character</p>
</div>
<div id="enemies">
	<p>Enemies Available To Attack</p>
</div>
<div id=fightsection>
	<p>Fight Section</p>
		<button id="attack">Attack</button>
</div>
<div id=defender>
	<p>Defender</p>
</div>
<div id="message">
</div>
<button id="restart">Restart</button>

<!-- we added jQuery -->
<script type="text/javascript" src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
<script type="text/javascript">
	$(document).ready(
		function() {

			var images = ["assets/images/rey.jpg", "assets/images/lukeskywalker.jpg", "assets/images/darthvader.jpg", "assets/images/kyloren.jpg"];

			var health = [100, 120, 150, 180]

			var chooseFrom = ["Rey", "Luke Skywalker", "Darth Vader", "Kylo Ren"]
			
			var random = Math.floor((Math.random() * 10));

			var baseAP = 0;

			var attacks = [];

			var counterAttack = Math.floor((Math.random() * 50) + 1);

			var youLost = "You have been defeated...GAME OVER!";
			
			for(var i = 0; i < 10; i++) {
				baseAP = baseAP + random; 
				attacks.push(baseAP);
			}

			var myIndex = 1;

			var attackMore = attacks[0]; 

			function nextElement() {
    
    			attackMore = attacks[myIndex];
    			myIndex = (myIndex + 1) % (attacks.length);
			};
			
			for (var i = 0; i < images.length; i++) {
				var b = $('<button>').prepend('<img src="' + images[i] + '" />');
				b.addClass('swImage-button swImage');
				$("#buttons").append(b);
				b.data('num', health[i]);

				var c = $('<p>').prepend(health[i]);
				c.addClass('fullHealth');
				b.append(c);

				//b.append('<p>' + health[i] + '</p>');
				b.prepend('<p>' + chooseFrom[i] + '</p>');
			}


			$('.swImage-button').on(
				'click', function() {

					$("#mycharacter").append(($(this)));
					$("#enemies").append($("#buttons"));
					$(this).find(".fullHealth").addClass("updatehp1");
					var playerHealth = $(this).data('num');
						
						$('.swImage-button').on('click', function() {
							
							$("#defender").append(($(this)));
							$(this).find(".fullHealth").addClass("updatehp2 youchoose");
							$(this).find(".fullHealth").removeClass("updatehp1");
								var defenderHealth = $(this).data('num');

								$("#attack").on('click', function() {
									defenderHealth = defenderHealth - attackMore;
									console.log("defender got hit with " + attackMore + " damage. Defenderhealth is now " + defenderHealth);
									nextElement();
									
									console.log("next attack on defender is " + attackMore);
									playerHealth = playerHealth - counterAttack;
									console.log("playerhealth got hit with " + counterAttack + " damage. playerhealth is " + playerHealth);

									$(".updatehp1").text(playerHealth);
									$(".updatehp2").text(defenderHealth);

									if (playerHealth <= 0) {
										$("#message").text(youLost)
									}

									else if (defenderHealth <= 0) {
										$(".youchoose").remove();
										$("#message").text("you won, ok");		
									}
								
								})
						});

			
				


				
			})



			
		
});

</script>
</body>
</html>
